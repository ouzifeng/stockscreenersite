{% with gf_to_tv_mapping={
"ETR": "XETR",
"LON": "LSE",
"NYSE": "NYSE",
"NASDAQ": "NASDAQ",
"KLSE": "MYX",
"AMS": "EURONEXT",
"ASX": "ASX",
"BCBA": "BCBA",
"STO": "OMXSTO",
"HEL": "OMXHEX",
"BIT": "MIL",
"BKK": "SET",
"BME": "BME",
"BMV": "BMV",
"BOM": "NSE",
"BVMF": "BMFBOVESPA",
"CPH": "OMXCOP",
"EBR": "EURONEXT",
"ELI": "EURONEXTLISBON",
"EPA": "EURONEXT",
"FRA": "FWB",
"HKG": "HKEX",
"IDX": "IDX",
"IST": "BIST",
"JSE": "JSE",
"KRX": "KRX",
"NZE": "NZX",
"SGX": "SGX",
"SWX": "SIX",
"TPE": "TWSE",
"TSE": "TSX",
"TYO": "TSE",
"VIE": "VIE",
"WSE": "GPW"
} %}
{% with exchange_code=stock.GFTicker|ticker_filter %}
{% with tv_exchange=gf_to_tv_mapping.exchange_code %}

<!-- TradingView Widget BEGIN -->

<div class="tradingview-widget-container">
    <div class="tradingview-widget-container__widget"></div>
    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js"
        async>
            {
                "symbols": [
                    ["{{ tv_exchange }}:{{ stock.GFTicker.split(':')[1] }}|1M"]
                ],
                    "chartOnly": true,
                        "width": 800,
                            "height": 500,
                                "locale": "en",
                                    "colorTheme": "light",
                                        "autosize": false,
                                            "showVolume": false,
                                                "showMA": false,
                                                    "hideDateRanges": false,
                                                        "hideMarketStatus": false,
                                                            "hideSymbolLogo": false,
                                                                "scalePosition": "right",
                                                                    "scaleMode": "Normal",
                                                                        "fontFamily": "-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",
                                                                            "fontSize": "10",
                                                                                "noTimeScale": false,
                                                                                    "valuesTracking": "1",
                                                                                        "changeMode": "price-and-percent",
                                                                                            "chartType": "area",
                                                                                                "maLineColor": "#2962FF",
                                                                                                    "maLineWidth": 1,
                                                                                                        "maLength": 9,
                                                                                                            "lineWidth": 2,
                                                                                                                "lineType": 0,
                                                                                                                    "dateRanges": [
                                                                                                                        "1d|1",
                                                                                                                        "1m|30",
                                                                                                                        "3m|60",
                                                                                                                        "12m|1D",
                                                                                                                        "60m|1W",
                                                                                                                        "all|1M"
                                                                                                                    ]
            }
        </script>
</div>
<!-- TradingView Widget END -->

{% endwith %}
{% endwith %}
{% endwith %}